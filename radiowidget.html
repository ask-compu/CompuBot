<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <link rel="shortcut icon" type='image/x-icon' href="favicon.ico"/>	
    <meta name="theme-color" content="#171717">

    <title>CompuFM Radio Stream</title>
    <script src="sorttable.js" type="text/javascript"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7TZY00T41G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7TZY00T41G');
    </script>
  </head>

  <body>
<center>
<!-- BEGINS: AUTO-GENERATED MUSES RADIO PLAYER CODE -->
<script type="text/javascript" src="https://hosted.muses.org/mrp.js"></script>
<script type="text/javascript">
MRP.insert({
'url':'https://icecast.yayponies.no/listen.ogg',
'codec':'ogg',
'volume':100,
'autoplay':true,
'jsevents':true,
'buffering':0,
'title':'CompuFM',
'welcome':'Welcome to CompuFM',
'wmode':'transparent',
'skin':'oldradio',
'width':205,
'height':132
});
</script>
<!-- ENDS: AUTO-GENERATED MUSES RADIO PLAYER CODE -->
<br />
<script type ="text/javascript">
function updateNowPlaying () {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://icecast.yayponies.no/status-json.xsl');
    xhr.responseType = 'json';
    xhr.onload = function(e) {
        if (this.status == 200) {  
        var nowplaying;
        var listeners;
        var artist;
        try {
          artist = !this.response["icestats"]["source"]["artist"];
          if (artist) {
            nowplaying = "Now Playing: " + this.response["icestats"]["source"]["server_name"];
          }
          else {
            nowplaying = "Now Playing: " + this.response["icestats"]["source"]["artist"] + " - " + this.response["icestats"]["source"]["title"];
          }
            listeners = "Listeners: " + this.response["icestats"]["source"]["listeners"];
        }
        catch {
            nowplaying = "Offline";
            listeners = "Listeners: 0";
        };
        console.log(nowplaying)
        console.log(listeners)
        document.getElementById("nowplaying").innerHTML = nowplaying;
        document.getElementById("listeners").innerHTML = listeners;
    };
    };
    xhr.send();
};
updateNowPlaying();
setInterval(updateNowPlaying, 10000);
</script>
<span id="nowplaying"></span>
<br />
<span id="listeners"></span>
<br />
<a href="https://icecast.yayponies.no/listen.ogg">If the radio player doesn't work click here</a>
</center>
  </body>
</html>
