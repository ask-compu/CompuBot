<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <link rel="shortcut icon" type='image/x-icon' href="favicon.ico"/>	
    <meta name="theme-color" content="#171717">

    <title>CompuFM Radio Stream</title>
    <script src="sorttable.js" type="text/javascript"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7TZY00T41G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7TZY00T41G');
    </script>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>CompuFM</h1>
        <h2>CompuFM, The Greatest Music on the Internet!</h2>

        <section id="downloads">
          <a href="https://github.com/ask-compu/CompuBot/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/ask-compu/CompuBot/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://compubot.compupony.net/rules.html" class="btn">#Compu Channel Rules</a>
          <a href="../commands.html" class="btn"></span>Commands</a>
          <a href="https://github.com/ask-compu/CompuBot" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>
<center>
<!-- BEGINS: AUTO-GENERATED MUSES RADIO PLAYER CODE -->
<script type="text/javascript" src="https://hosted.muses.org/mrp.js"></script>
<script type="text/javascript">
MRP.insert({
'url':'http://yayponies.no:8000/listen.ogg',
'codec':'ogg',
'volume':100,
'autoplay':true,
'jsevents':true,
'buffering':0,
'title':'CompuFM',
'welcome':'Welcome to CompuFM',
'wmode':'transparent',
'skin':'oldradio',
'width':205,
'height':132
});
</script>
<!-- ENDS: AUTO-GENERATED MUSES RADIO PLAYER CODE -->
<br />
<script type ="text/javascript">
function updateNowPlaying () {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'http://yayponies.no:8000/status-json.xsl');
    xhr.responseType = 'json';
    xhr.onload = function(e) {
        if (this.status == 200) {  
        var nowplaying;
        var listeners;
        var artist;
        try {
          artist = !this.response["icestats"]["source"]["artist"];
          if (artist) {
            nowplaying = "Now Playing: " + this.response["icestats"]["source"]["server_name"];
          }
          else {
            nowplaying = "Now Playing: " + this.response["icestats"]["source"]["artist"] + " - " + this.response["icestats"]["source"]["title"];
          }
            listeners = "Listeners: " + this.response["icestats"]["source"]["listeners"];
        }
        catch {
            nowplaying = "Offline";
            listeners = "Listeners: 0";
        };
        console.log(nowplaying)
        console.log(listeners)
        document.getElementById('song-history').src = document.getElementById('song-history').src
        document.getElementById("nowplaying").innerHTML = nowplaying;
        document.getElementById("listeners").innerHTML = listeners;
		
		if (nowplaying == "Offline") {
			document.title = "CompuFM Radio Stream";
		} else {
			document.title = nowplaying;
		}
    };
    };
    xhr.send();
};
updateNowPlaying();
setInterval(updateNowPlaying, 10000);
</script>
<span id="nowplaying"></span>
<br />
<span id="listeners"></span>
<br />
  <a href="http://yayponies.no:8000/listen.ogg">If the radio player doesn't work click here</a>
<br />
  <a href="http://yayponies.no:8000/">Stats</a>
<br />
  <a href="/radiowidget">Radio Widget</a>
<br />
<img src="spinning%20vinyl.gif" alt="Cute Pony Spinner" width="400" height="400">
<br />

<h1>Last Played Songs</h1>
<iframe id="song-history" src="https://radio.bronytube.nl/public/yp/history?theme=dark" frameborder="0" allowtransparency="true" style="width: 100%; min-height: 300px; border: 0;"></iframe>
<h1>Request a Song</h1>
<iframe src="https://radio.bronytube.nl/public/yp/embed-requests?theme=dark" frameborder="0" allowtransparency="true" style="width: 100%; min-height: 960px; border: 0;"></iframe>
</center>





    </div>
  </body>
</html>
